<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wcc.wds.web.dao.CollectTaskDao">
  <select id="selectAll" resultType="com.wcc.wds.web.model.CollectTask">
    select * from sys_collect_config
  </select>
  <insert id="insert" parameterType="com.wcc.wds.web.model.CollectTask">
    insert into sys_collect_config(id,task_name,regex,collect_time,collect_path,revolution,thread_num,task_status)
    values (#{id},#{taskName},#{regex},#{collectTime},#{collectPath},#{revolution},#{threadNum},#{taskStatus})
  </insert>
  <delete id="deleteByName">
    delete from sys_collect_config where task_name = #{taskName}
  </delete>

  <update id="updateNotNullByName">
    update sys_collect_config
    <set >
      <if test="regex != null">
        regex = #{regex},
      </if>
      <if test="taskStatus != null">
        task_status = #{taskStatus},
      </if>
      <if test="collectPath != null">
        collect_path = #{collectPath},
      </if>
      <if test="threadNum != null">
        thread_num = #{threadNum},
      </if>
    </set>
    where task_name = #{taskName}
  </update>

  <select id="selectIdByStatus" resultType="java.lang.String">
    select id from sys_collect_config where task_status = #{taskStatus}
  </select>

  <select id="selectById" resultType="com.wcc.wds.web.model.CollectTask">
    select * from sys_collect_config where id = #{id}
  </select>
</mapper>